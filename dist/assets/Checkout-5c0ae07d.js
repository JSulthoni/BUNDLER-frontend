import{q as h,h as u,d as x,u as p,e as j,s as m,a as N,j as s,R as k}from"./index-21e8d9ac.js";const f="http://localhost:3000/api",C=(a,n)=>async i=>{const c=Array.isArray(a)&&a.every(e=>e.product&&e.quantity);try{if(c){const e=await h.post(`${f}/stripe/create`,{payload:a,option:n});window.location.assign(e.data.url)}}catch(e){e.response&&e.response.status===500?console.error("Server error: ",e.response.data):console.error("Network error: ",e.message),i(u("SOMETHING WENT WRONG"))}},E="/assets/stripeicon-18439614.svg";const g=()=>{const a=x(),n=p(),i=j(),{payload:c,option:e}=m(t=>t.checkout),o=()=>{let t=0;return c.forEach(r=>t+=r.quantity*r.product.price),t.toFixed(2)};N.useEffect(()=>{(!i||!c||!e)&&n("/"),window.scrollTo(0,0)},[i,c,e]);const l=()=>{a(k()),n("/")},d=t=>{switch(t){case"stripe":a(C(c,e));break}};return s.jsxs("section",{className:"checkout flexc-center",children:[s.jsx("h3",{children:"SVANE CHECKOUT"}),s.jsxs("div",{className:"checkout-wrapper flexr-s-start",children:[s.jsx("div",{className:"left flexc-s-start",children:s.jsx("div",{className:"checkout-list",children:c==null?void 0:c.map(t=>{const{product:r}=t;return s.jsxs("div",{className:"checkout-item flexr-s-start",children:[s.jsx("img",{src:`${r.image1}?auto=compress&cs=tinysrgb&h=640&dpr=1`,alt:r.title}),s.jsxs("div",{className:"checkout-details flexc-s-start",children:[s.jsx("h4",{children:r.title}),s.jsx("p",{children:r.description}),s.jsxs("div",{className:"checkout-number",children:[s.jsx("span",{children:"Quantity"}),s.jsxs("span",{children:[": ",t.quantity]})]}),s.jsxs("div",{className:"checkout-number",children:[s.jsx("span",{children:"Subtotal ($)"}),s.jsxs("span",{children:[": ",t.quantity*r.price,".00"]})]})]})]},t._id)})})}),s.jsx("div",{className:"right",children:s.jsxs("div",{className:"checkout-payment flexc-s-start",children:[s.jsxs("div",{className:"checkout-total flexr-c-between",children:[s.jsx("span",{children:"Total ($)"}),s.jsxs("span",{children:[": ",o()]})]}),s.jsx("span",{children:"Select payment method :"}),s.jsxs("div",{className:"flexr-c-between checkout-button",children:[s.jsx("p",{children:"STRIPE"}),s.jsx("button",{onClick:()=>d("stripe"),className:"flexc-center checkout-icon",children:s.jsx("img",{className:"checkout-icon",src:E,loading:"lazy",alt:"stripe purchase button"})})]}),s.jsx("div",{className:"flexr-c-between",children:s.jsx("button",{onClick:()=>l(),className:"button-transparent",children:"CANCEL CHECKOUT"})})]})})]})]})};export{g as default};
